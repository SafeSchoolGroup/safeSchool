{% extends '::home_layout.html.twig' %}

{% block stylesheets_home %}
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/css/style_exploit.css') }} " />
    <link rel="stylesheet" type="text/css" href="{{ asset('assets/fa/css/font-awesome.css') }} " />
{% endblock %}

{% block homeBody %}
<h2 id="h2-exploit">Exploits</h2>

{% set isBoolPhotoC = 0 %}
{% for exploit in exploitsPagination %}
<div class="row" id="separat">
    <div class="row" >
        <div class="col-sm-5" id="div_row_separat">
            {% for exploitFichier in exploit.exploitFichiers %}
                {% if exploitFichier.isPhotoCouvertureExploit %}
                    {% set isBoolPhotoC = 1 %}
                        <img src="{{ asset('uploads/dossiers-exploit/' ~ exploitFichier.chemin ) | apply_filter('my_thumb') }}" id="img-exploit_image" class="img-responsive" />
                {% else %}
                    {% set isBoolPhotoC = 0 %}
                {% endif %}
            {% endfor %}

            {% if isBoolPhotoC == 0 %}
                <img src="{{  asset('assets/img/image15.JPG') | apply_filter('my_thumb') }}" id="img-exploit_image" class="img-responsive" />
            {% endif %}

        </div>


        <div class="col-sm-7" id="info">
            <div class="row">
                <h3>{{ exploit.titre }} </h3>

                <ul class="exploit-infos">

                    <li>
                        {% if apprenant is empty %}
                        {% else %}
                        {{apprenant.nom}}    {{apprenant.prenom}}

                        {% endif %}

                </li>
                    <li>{{ exploit.datePublication|date('d-m-Y') }}</li>
                </ul>

                    <p class="p-exploit" id="{{exploit.id}}pexploit">
                        {{ exploit.description }}
                    </p>
                    <em>
                        <a href="#" id="a-plus" class="{{exploit.id}}"> Plus  <i class="fa fa-caret-down"></i></a>
                        <a href="#" id="{{exploit.id}}" class="a-moins"> Moins <i class="fa fa-caret-up"></i></a>
                    </em>

            </div>

            <div class="row">
                <div class="col-md-2">
                  <button type="button" id="" class="btn btn-primary " data-toggle="collapse" data-target="#{{exploit.id}}collapse" aria-expanded="false"> commenter
                  <span class="chevron right"></span>
                  </button>
                </div>


                <div class="col-md-10">

                    <div class="row">
                        <div class="col-md-2 ">
                            <a href="#" id="{{exploit.id}}point" class="btn btn-default exploit_points">Points <span>{{exploit.point}}</span></a>
                        </div>



                        <div class="col-md-2">
                            <div class="row comment">
                                <span class="glyphicon glyphicon-comment icone "></span><h6 id="vote2">commenter</h6>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
                <!--fermeture col-sm-5 -->
        </div>
    </div>
    <div class="row collapse " id="{{exploit.id}}collapse">

        <div  class="col-sm-3" id="">
            jzoimzgjeroper
            <div class="row">
                hv;jhbjhcd
            </div>
        </div>

        <div class="col-md-4">
            <div class="row">
ihdiodhfoifdf
            </div>
        </div>


        <div class="col-md-5">
            <div class="row">

              qdliofhlefeifhfloizhlilkdf

            </div>
        </div>

        <div class="row div-fichiers">
        {% for exploitFichier in exploit.exploitFichiers %}
            {% if exploitFichier.isPhotoCouvertureExploit == false %}
          <ul class="div-fichiers-item">
            <li>

              <a href="#">
                <img src="{{  asset('uploads/dossiers-exploit/' ~ exploitFichier.chemin) }}" id="" class="img-responsive" width="150" height="150" alt="image_associé à l\exploit"/>
              </a>
            </li>
          </ul>
          {% endif %}
        {% endfor %}

          </div>
          <em>
               <span id="legende_dossier_exploit"> les images et dossiers liés à l'exploit ci-dessou </span>
          </em>

        <div class="row">


          <div class="col-md-2 ">
            <span class="glyphicon glyphicon-tag" id="tags"> </span>
          </div>
        <div class="col-md-2 ">
            <a href="{{ path ('exploit_domaine', { 'id': exploit.sousDomaine.id, 'id_user': idUser }) }}" id="exploit_domaine" class="btn btn-default"> {{ exploit.sousDomaine.libelleSousdomaine }}</a>
        </div>
      </div>
    </div>
</div>


{% endfor %}


{# display navigation #}
<div class="navigation">
    {{ knp_pagination_render(exploitsPagination) }}
</div>





{% endblock %}

{% block javascripts %}
{# jQuery must be available in the page by this time, and make sure javascript block is after
  <div id="fos_comment_thread"> in the DOM Tree, for example right before </body> tag
#}
{% javascripts %}
<script type="text/javascript" src="{{ asset_url }}"></script>
     <script type="text/javascript" src="{{ asset('assets/js/ninja-slider.js') }}"></script>
{% endjavascripts %}
<script type="text/javascript" src="{{ asset('assets/js/exploit.js') }}"></script>
<script src="{{ asset('assets/js/jquery.dotdotdot.min.js') }}"></script>
    <script type="text/javascript" language="JavaScript">
    $(document).ready(function() {
      $('.col-md-2 .btn.btn-primary').click(function () {
          var element= $(this).find("span");

          if(element.hasClass("right")){
               element.removeClass("right").addClass("bottom");
          }
          else {
              element.removeClass("bottom").addClass("right");
          }

      });
    });

        //readmore js




    $(document).ready(function() {
        var div_info = $('div#info');

        div_info.on('click', function(e){
            e.preventDefault();
            var selected_elmt = e.target;
            var selected_class = $(selected_elmt).attr('class');
            var selected_id = $(selected_elmt).attr('id');


            if (selected_id == "a-plus") {
                $("p#"+selected_class+"pexploit").css('height', 'auto');
                $("#a-plus."+selected_class).css('visibility', 'hidden');
                $(".a-moins#"+selected_class).css('visibility', 'visible');
            }

            if (selected_class == "a-moins") {
                $("p#"+selected_id+"pexploit").css('height', '25px');
                $("p#"+selected_id+"pexploit").css('overflow', 'hidden');
                $("#a-plus."+selected_id).css('visibility', 'visible');
                $(".a-moins#"+selected_id).css('visibility', 'hidden');
            }

        });


    });



    </script>

    <script>
    function lightbox(idx) {
        //Show the slider wrapper
        var ninjaSldr = document.getElementById("ninja-slider");
        ninjaSldr.parentNode.style.display = "block";

        //Then init the slider
        //Note: The { initSliderByCallingInitFunc: true } option in the
        // ninja-slider.js tells the page not to initiate the slider
        // unless the following init(idx) function is called.
        nslider.init(idx);

        //Then mimic clicking the fullscreen button to popup the modal
        var fsBtn = document.getElementById("fsBtn");
        fsBtn.click();
    }

    function fsIconClick(isFullscreen) {
        //Note: fsIconClick is the default event handler of the fullscreen button
        if (isFullscreen) {
            var ninjaSldr = document.getElementById("ninja-slider");
            ninjaSldr.parentNode.style.display = "none";
        }
    }

</script>

{% endblock %}
